<?xml version="1.0" encoding="UTF-8" standalone="no"?><!DOCTYPE html>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 14. Continuous Integration</title><link rel="stylesheet" type="text/css" href="docbook.css"/><link rel="stylesheet" type="text/css" href="css/freedumbytes.css"/><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"/><link rel="prev" href="repository.manager.html" title="Chapter 13. Repository Manager"/><link rel="next" href="integrated.development.environment.html" title="Chapter 15. Integrated Development Environment"/><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><link rel="shortcut icon" href="./images/community/docbook/glider.ico"/></head><body><header><p id="title"/><ul class="navheader"><li class="previous"><a accesskey="p" href="repository.manager.html"><strong>Previous</strong></a></li><li class="next"><a accesskey="n" href="integrated.development.environment.html"><strong>Next</strong></a></li></ul></header><section class="chapter" id="continuous.integration"><div class="titlepage"><div><div><h1 class="title"><a id="continuous.integration" class="anchor" href="#continuous.integration"><span class="octicon octicon-link"/></a>Chapter 14. Continuous Integration</h1></div></div></div><div class="toc"><div class="toc-title">Table of Contents</div><ul class="toc"><li><span class="section"><a href="continuous.integration.html#ci.jenkins">14.1. Jenkins</a></span><ul><li><span class="section"><a href="continuous.integration.html#ci.jenkins.resources">14.1.1. Resources</a></span></li><li><span class="section"><a href="continuous.integration.html#ci.jenkins.install.guide">14.1.2. Jenkins installation guide</a></span></li><li><span class="section"><a href="continuous.integration.html#ci.jenkins.apache.config">14.1.3. Apache configuration</a></span></li><li><span class="section"><a href="continuous.integration.html#ci.jenkins.config">14.1.4. Jenkins configuration</a></span></li><li><span class="section"><a href="continuous.integration.html#ci.jenkins.jira.integration">14.1.5. JIRA integration</a></span></li><li><span class="section"><a href="continuous.integration.html#ci.jenkins.config.slave">14.1.6. Slave configuration</a></span></li></ul></li></ul></div><section class="section" id="ci.jenkins"><div class="titlepage"><div><div><h2 class="title"><a id="ci.jenkins" class="anchor" href="#ci.jenkins"><span class="octicon octicon-link"/></a>14.1. Jenkins</h2></div></div></div><p><span class="inlinemediaobject"><img src="images/icons/jenkins.png"/></span> In a nutshell, <a class="link" href="https://jenkins.io/">Jenkins</a> (formerly known as
      <span class="inlinemediaobject"><img src="images/icons/hudson.png"/></span> <a class="link" href="https://jenkins.io/blog/2011/01/11/hudsons-future/">Hudson</a>)
      provides an easy-to-use so-called continuous integration system, making
      it easier for developers to integrate changes to the project, and making
      it easier for users to obtain a fresh build. The automated, continuous
      build increases the productivity.</p><section class="section" id="ci.jenkins.resources"><div class="titlepage"><div><div><h3 class="title"><a id="ci.jenkins.resources" class="anchor" href="#ci.jenkins.resources"><span class="octicon octicon-link"/></a>14.1.1. Resources</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist compact"><li class="listitem"><p><a class="link" href="https://jenkins.io/download/">Download</a> Jenkins
            and <a class="link" href="http://updates.jenkins-ci.org/download/plugins/">plugins</a>.</p></li><li class="listitem"><p><a class="link" href="https://jenkins.io/doc/upgrade-guide/">Upgrade</a>
            checklist:</p><div class="itemizedlist"><ul class="itemizedlist compact"><li class="listitem"><p>Related products: -.</p></li><li class="listitem"><p>References: -.</p></li><li class="listitem"><p>Integration configuration changes: <a class="link" href="continuous.integration.html#ci.jenkins.install.guide" title="14.1.2. Jenkins installation guide">Jenkins - Installation
                guide <code class="code">Tomcat webapps</code></a>.</p></li></ul></div></li><li class="listitem"><p>Jenkins <a class="link" href="https://jenkins.io/doc/">Documentation</a> such as
            <a class="link" href="https://wiki.jenkins-ci.org/display/JENKINS/Plugins">Plugins</a>,
            <a class="link" href="https://jenkins.io/solutions/pipeline/">Pipeline</a>
            (<a class="link" href="https://jenkins.io/blog/2017/02/01/pipeline-scalability-best-practice/">Best
            Practices</a> / <a class="link" href="https://jenkins.io/doc/pipeline/examples/">Examples</a>),
            <a class="link" href="https://jenkins.io/projects/blueocean/">Blue
            Ocean</a> (<a class="link" href="https://jenkins.io/node/tags/blueocean/">#blueocean</a>),
            <a class="link" href="https://jenkins.io/security/">Security</a>
            (<a class="link" href="https://jenkins.io/node/tags/security/">#security</a>),
            <a class="link" href="https://jenkins.io/user-handbook.pdf">Handbook</a>,
            <a class="link" href="https://jenkins.io/node/">Blog</a>, <a class="link" href="https://wiki.jenkins-ci.org/display/JENKINS/Extend+Jenkins">Extend</a>
            and <a class="link" href="https://wiki.jenkins-ci.org/display/JENKINS/Containers">Containers</a>
            (<a class="link" href="https://wiki.jenkins-ci.org/display/JENKINS/Tomcat">Tomcat</a>).</p></li><li class="listitem"><p><a class="link" href="https://jenkins.io/solutions/docker/">Combining
            Jenkins and Docker</a> together can bring improved speed and
            consistency to your automation tasks.</p></li><li class="listitem"><p><a class="link" href="https://wiki.jenkins-ci.org/display/JENKINS/Features+controlled+by+system+properties">Jenkins
            Features</a> Controlled with System Properties.</p></li><li class="listitem"><p><span class="inlinemediaobject"><img src="images/icons/martinfowler.png"/></span> Quick overview of <a class="link" href="https://martinfowler.com/articles/continuousIntegration.html">Continuous
            Integration</a> by Martin Fowler.</p></li><li class="listitem"><p>Jenkins CI: <a class="link" href="http://zeroturnaround.com/rebellabs/rebel-labs-report-jenkins-ci-the-origins-of-butlers-build-masters-and-bowties/">The
            Origins of Butlers, Build Masters and Bowties</a>.</p></li></ul></div></section><section class="section" id="ci.jenkins.install.guide"><div class="titlepage"><div><div><h3 class="title"><a id="ci.jenkins.install.guide" class="anchor" href="#ci.jenkins.install.guide"><span class="octicon octicon-link"/></a>14.1.2. Jenkins installation guide</h3></div></div></div><p><a class="link" href="https://jenkins.io/download/">Download</a>
        the latest archive: <code class="filename">jenkins.war</code> [version <a class="link" href="https://jenkins.io/changelog/">2.64</a> or <a class="link" href="https://jenkins.io/changelog-stable/">LTS
        2.46.3</a>].</p><p id="ci.jenkins.home"><a id="ci.jenkins.home"><span style="display:none;">trick</span></a>Press
        <span class="keycap"><strong><span class="inlinemediaobject"><img src="images/os/windows/windows-key.gif"/></span></strong></span>+<span class="keycap"><strong>Break</strong></span> keys to open the Windows System Properties. Select
        <span class="guisubmenu"><strong>Advanced system settings</strong></span> → <span class="guibutton"><strong>Enviro<span class="accel">n</span>ment Variables</strong></span> and add a <span class="guibutton"><strong>Ne<span class="accel">w</span></strong></span>
        system variable <code class="envar">JENKINS_HOME</code> pointing to
        <strong class="userinput"><code><code class="filename">P:\dev\data\ci\jenkins</code></code></strong>. You
        need to reboot the server for the <code class="envar">Path</code> setting to take
        effect.</p><p>Deploy the <code class="filename">.war</code> in Tomcat
        by dropping it into the directory <code class="filename">P:\dev\apps\webserver\apache-tomcat-8.0.26\webapps</code>.</p><div style="margin-left: 0.5in; margin-right: 0.5in;" class="note"><h2>Note</h2><p>Stop Tomcat service when Jenkins doesn't restart properly
          because the <code class="filename">P:\dev\apps\webserver\apache-tomcat-8.0.26\webapps\jenkins</code>
          could not be cleaned completely. After Tomcat is stopped just delete
          the folder <code class="filename">webapps\jenkins</code>
          and restart Tomcat service.</p></div><section class="section" id="ci.jenkins.install.guide.unlock"><div class="titlepage"><div><div><h4 class="title"><a id="ci.jenkins.install.guide.unlock" class="anchor" href="#ci.jenkins.install.guide.unlock"><span class="octicon octicon-link"/></a>14.1.2.1. Unlock Jenkins</h4></div></div></div><p>Unlock Jenkins at <a class="link" href="http://localhost:8068/jenkins">http://localhost:8068/jenkins</a>
          with the <span class="guilabel"><strong>Administrator password</strong></span> from
          <code class="filename">%JENKINS_HOME%\secrets\initialAdminPassword</code>.</p><p>Next install suggested plugins:</p><div class="itemizedlist"><ul class="itemizedlist compact"><li class="listitem"><p><a class="link" href="https://wiki.jenkins-ci.org/display/JENKINS/CloudBees+Folders+Plugin">CloudBees
              Folders</a> allows users to create
              <span class="emphasis"><em>folders</em></span> to organize jobs. Users can define
              custom taxonomies (like by project type, organization type etc).
              Folders are nestable and you can define views within
              folders.</p></li><li class="listitem"><p><a class="link" href="https://wiki.jenkins-ci.org/display/JENKINS/OWASP+Markup+Formatter+Plugin">OWASP
              Markup Formatter</a> uses policy definitions to allow limited
              HTML markup in user-submitted text.</p></li><li class="listitem"><p><a class="link" href="https://wiki.jenkins-ci.org/display/JENKINS/Build-timeout+Plugin">Build-timeout</a>
              allows you to automatically abort a build if it's taking too
              long. Once the timeout is reached, Jenkins behaves as if an
              invisible hand has clicked the <span class="emphasis"><em>abort build</em></span>
              button.</p></li><li class="listitem"><p><a class="link" href="https://wiki.jenkins-ci.org/display/JENKINS/Credentials+Binding+Plugin">Credentials
              Binding</a> allows credentials to be bound to environment
              variables for use from miscellaneous build steps.</p></li><li class="listitem"><p><a class="link" href="https://wiki.jenkins-ci.org/display/JENKINS/Timestamper">Timestamper</a>
              adds timestamps to the Console Output with the option to switch
              to between <span class="guilabel"><strong>System clock time</strong></span> and
              <span class="guilabel"><strong>Elapsed time</strong></span>.</p></li><li class="listitem"><p><a class="link" href="https://wiki.jenkins-ci.org/display/JENKINS/Workspace+Cleanup+Plugin">Workspace
              Cleanup</a> deletes the workspace before the build or when a
              build is finished and artifacts saved.</p></li><li class="listitem"><p><a class="link" href="https://wiki.jenkins-ci.org/display/JENKINS/Ant+Plugin">Ant</a>
              adds Apache Ant support to Jenkins.</p></li><li class="listitem"><p><a class="link" href="https://wiki.jenkins-ci.org/display/JENKINS/Gradle+Plugin">Gradle</a>
              makes it possible to invoke a Gradle build script as the main
              build step.</p></li><li class="listitem"><p><a class="link" href="https://github.com/jenkinsci/pipeline-plugin/blob/master/README.md">Pipeline</a>
              is a suite of plugins that lets you orchestrate automation,
              simple or complex.</p></li><li class="listitem"><p><a class="link" href="https://wiki.jenkins-ci.org/display/JENKINS/GitHub+Organization+Folder+Plugin">GitHub
              Organization Folder</a> is Pipeline-as-Code support for a
              whole GitHub organization. Scans all the branches &amp;
              repositories in GitHub organization and build them via Jenkins
              pipelines automatically.</p></li><li class="listitem"><p><a class="link" href="https://wiki.jenkins-ci.org/display/JENKINS/Pipeline+Stage+View+Plugin">Pipeline
              Stage View</a> includes an extended visualization of Pipeline
              build history on the index page of a flow project, under
              <span class="emphasis"><em>Stage View</em></span>.</p></li><li class="listitem"><p><a class="link" href="https://wiki.jenkins-ci.org/display/JENKINS/Git+Plugin">Git</a>
              allows use of Git as a build SCM, including repository browsers
              for several providers. A recent Git runtime is required.</p></li><li class="listitem"><p><a class="link" href="https://wiki.jenkins-ci.org/display/JENKINS/Subversion+Plugin">Subversion</a>
              adds the Subversion support (via SVNKit) to Jenkins.</p></li><li class="listitem"><p><a class="link" href="https://wiki.jenkins-ci.org/display/JENKINS/SSH+Slaves+plugin">SSH
              Slaves</a> allows you to manage slaves running on *nix
              machines over SSH.</p></li><li class="listitem"><p><a class="link" href="https://wiki.jenkins-ci.org/display/JENKINS/Matrix+Authorization+Strategy+Plugin">Matrix
              Authorization Strategy</a> offers matrix-based security
              authorization strategies (global and per-project).</p></li><li class="listitem"><p><a class="link" href="https://wiki.jenkins-ci.org/display/JENKINS/PAM+Authentication+Plugin">PAM
              Authentication</a> adds Unix Pluggable Authentication Module
              (PAM) support to Jenkins.</p></li><li class="listitem"><p><a class="link" href="https://wiki.jenkins-ci.org/display/JENKINS/LDAP+Plugin">LDAP</a>
              provides yet another way of authenticating users using LDAP. It
              can be used with LDAP servers like Active Directory or OpenLDAP
              among others.</p></li><li class="listitem"><p><a class="link" href="https://wiki.jenkins-ci.org/display/JENKINS/Email-ext+plugin">Email
              Extension</a> allows you to configure every aspect of email
              notifications. You can customize when an email is sent, who
              should receive it, and what the email says.</p></li><li class="listitem"><p><a class="link" href="https://wiki.jenkins-ci.org/display/JENKINS/Mailer">Mailer</a>
              allows you to configure email notifications for build results.
              This is a break-out of the original core based email
              component.</p></li></ul></div><p>Or select additional plugins to install:</p><div class="itemizedlist"><ul class="itemizedlist compact"><li class="listitem"><p><a class="link" href="https://wiki.jenkins-ci.org/display/JENKINS/Dashboard+View">Dashboard
              View</a> provides a portal-like view for the Jenkins
              instance.</p></li><li class="listitem"><p><a class="link" href="https://wiki.jenkins-ci.org/display/JENKINS/Windows+Slaves+Plugin">Windows
              Slaves</a> allows you to connect to Windows machines and
              start slave agents on them.</p></li></ul></div></section><section class="section" id="ci.jenkins.install.guide.access"><div class="titlepage"><div><div><h4 class="title"><a id="ci.jenkins.install.guide.access" class="anchor" href="#ci.jenkins.install.guide.access"><span class="octicon octicon-link"/></a>14.1.2.2. Access</h4></div></div></div><p>Create first Admin User:
          <strong class="userinput"><code><em class="replaceable"><code>jjasper</code></em></code></strong>.</p><p>Select <span class="guilabel"><strong>Jenkins</strong></span> → <span class="guilabel"><strong>Manage Jenkins</strong></span> → <span class="guilabel"><strong>Configure Global Security</strong></span> or type <strong class="userinput"><code>config</code></strong> in the search
          box to set:</p><div class="itemizedlist"><ul class="itemizedlist compact"><li class="listitem"><p><span class="guilabel"><strong>Enable security</strong></span> and configure
                <span class="guilabel"><strong>Access Control</strong></span>:</p><div class="itemizedlist"><ul class="itemizedlist compact"><li class="listitem"><p><span class="guilabel"><strong>Security Realm</strong></span>:
                      <span class="guilabel"><strong>Delegate to servlet
                      container</strong></span>.</p></li><li class="listitem"><p><span class="guilabel"><strong>Authorization</strong></span>:
                      <span class="guilabel"><strong>Logged-in users can do
                      anything</strong></span>.</p></li><li class="listitem"><p><span class="guilabel"><strong>Markup Formatter</strong></span>:
                      <span class="guilabel"><strong>Safe HTML</strong></span>.</p></li><li class="listitem"><p><span class="guilabel"><strong>Prevent <a class="link" href="https://www.owasp.org/index.php/Cross-Site_Request_Forgery">Cross
                      Site Request Forgery</a> exploits</strong></span> with
                      <span class="guilabel"><strong>Crumb Algorithm</strong></span>: <span class="guilabel"><strong>Default
                      Crumb Issuer</strong></span> (see also <a class="xref" href="web.server.html#web.tomcat.remote.authentication" title="8.1.5.1. Remote authentication">Section 8.1.5.1, “Remote authentication”</a>) and click
                      <span class="guibutton"><strong>Save</strong></span>.</p></li></ul></div></li></ul></div></section><section class="section" id="ci.jenkins.install.guide.maven.integration"><div class="titlepage"><div><div><h4 class="title"><a id="ci.jenkins.install.guide.maven.integration" class="anchor" href="#ci.jenkins.install.guide.maven.integration"><span class="octicon octicon-link"/></a>14.1.2.3. Maven integration TODO</h4></div></div></div><p>When using Maven with <a class="link" href="build.tool.html#build.maven.password.encryption" title="4.2.5. Password Encryption">password encryption</a>
          it will always look for the file
          <code class="filename">settings-security.xml</code> in the fixed location
          <code class="filename">%USERPROFILE%\.m2</code>. Therefore
          make sure to create one for the <a class="link" href="web.server.html#web.tomcat.windows.user" title="8.1.3.1. Log On Windows user">Log On Windows user</a> with a
          copy of for example
          <code class="filename">C:\Users\jjasper\.m2\settings-security.xml</code> into
          <code class="filename">C:\Users\tomcat\.m2</code>.</p><div style="margin-left: 0.5in; margin-right: 0.5in;" class="important"><h2>Important</h2><p>This still may not be enough when using for example <a class="link" href="http://www.mojohaus.org/truezip/truezip-maven-plugin/">truezip-maven-plugin</a>
            which fails with <span class="quote">“<span class="quote">IOException: Unable to create
            P:\dev\data\ci\jenkins\jobs\…\<em class="replaceable"><code>${project.artifactId}-${project.version}</code></em>.war\<em class="replaceable"><code>extras</code></em></span>”</span>
            trying to copy additional files into a war. To fix this
            right-click on the directory <code class="filename">P:\dev\data\ci\jenkins\jobs</code> and
            select <span class="guimenuitem"><strong>P<span class="accel">r</span>operties</strong></span> → <span class="guimenuitem"><strong>Security</strong></span> → <span class="guibutton"><strong><span class="accel">E</span>dit…</strong></span> → <span class="guilabel"><strong>Users
                (<em class="replaceable"><code>COMPUTERNAME</code></em>\Users)</strong></span> to allow <span class="guilabel"><strong>Modify</strong></span> and thus
            <span class="guilabel"><strong>Write</strong></span> and click
            <span class="guibutton"><strong>OK</strong></span>.</p></div></section></section><section class="section" id="ci.jenkins.apache.config"><div class="titlepage"><div><div><h3 class="title"><a id="ci.jenkins.apache.config" class="anchor" href="#ci.jenkins.apache.config"><span class="octicon octicon-link"/></a>14.1.3. Apache configuration</h3></div></div></div><p>Instruct Apache to <a class="link" href="http.server.html#http.apache.config.proxy" title="7.1.9. Proxy configuration">proxy</a> all URLs whose path
        portions begin with <code class="uri">/jenkins/</code> using the following
        <code class="filename">P:\dev\apps\httpserver\apache-conf\httpd-vhosts.conf</code>
        include <a class="xref" href="continuous.integration.html#http.apache.include.httpd.jenkins"><img src="images/community/docbook/callouts/1.png" alt="1" border="0" height="17px" width="17px" class="callout"/></a>:</p><pre xmlns="" class="language-provided"><code class="language-apache">&lt;VirtualHost *:80&gt;
   …

  &lt;IfModule proxy_module&gt;
  &lt;IfModule proxy_http_module&gt;
     …

    &lt;Proxy *&gt;
      …
    &lt;/Proxy&gt;

    # Jenkins
    Include ../apache-conf/httpd-jenkins.conf<span xmlns="http://www.w3.org/1999/xhtml" id="http.apache.include.httpd.jenkins"/><a xmlns="http://www.w3.org/1999/xhtml" id="http.apache.include.httpd.jenkins"><span style="display:none;">trick</span></a><img xmlns="http://www.w3.org/1999/xhtml" style="border: 0; " src="images/community/docbook/callouts/1.png" alt="1" height="17px" width="17px" class="callout"/>
  &lt;/IfModule&gt;
  &lt;/IfModule&gt;
&lt;/VirtualHost&gt;
</code></pre><p>with the following content in
        <code class="filename">P:\dev\apps\httpserver\apache-conf\httpd-jenkins.conf</code>:</p><pre xmlns="" class="language-provided"><code class="language-apache">&lt;IfModule proxy_module&gt;
&lt;IfModule proxy_ajp_module&gt;
  <a xmlns="http://www.w3.org/1999/xhtml" class="link" href="http://httpd.apache.org/docs/current/mod/core.html#allowencodedslashes">AllowEncodedSlashes</a> NoDecode<span xmlns="http://www.w3.org/1999/xhtml" id="http.apache.reverse.proxy.jenkins.test"/><a xmlns="http://www.w3.org/1999/xhtml" id="http.apache.reverse.proxy.jenkins.test"><span style="display:none;">trick</span></a><img xmlns="http://www.w3.org/1999/xhtml" style="border: 0; " src="images/community/docbook/callouts/1.png" alt="1" height="17px" width="17px" class="callout"/>
  ProxyPass /jenkins        ajp://localhost:8069/jenkins <a xmlns="http://www.w3.org/1999/xhtml" class="link" href="http://httpd.apache.org/docs/current/mod/mod_proxy.html#ProxyPass">nocanon</a><span xmlns="http://www.w3.org/1999/xhtml" id="http.apache.reverse.proxy.jenkins.test"/><a xmlns="http://www.w3.org/1999/xhtml" id="http.apache.reverse.proxy.jenkins.test"><span style="display:none;">trick</span></a><img xmlns="http://www.w3.org/1999/xhtml" style="border: 0; " src="images/community/docbook/callouts/1.png" alt="1" height="17px" width="17px" class="callout"/>
  ProxyPassReverse /jenkins ajp://localhost:8069/jenkins

  &lt;Location /jenkins&gt;
    Include ../apache-conf/httpd-freedumbytes-realm.conf
  &lt;/Location&gt;
&lt;/IfModule&gt;
&lt;/IfModule&gt;
</code></pre><div style="margin-left: 0.5in; margin-right: 0.5in;" class="note"><h2>Note</h2><p>The entries at <a class="xref" href="continuous.integration.html#http.apache.reverse.proxy.jenkins.test"><img style="border: 0; " src="images/community/docbook/callouts/1.png" alt="1" height="17px" width="17px" class="callout"/></a> are required to
            suppress the message <span class="quote">“<span class="quote">It appears that your <a class="link" href="https://wiki.jenkins-ci.org/display/JENKINS/Running+Jenkins+behind+Apache">reverse
            proxy set up</a> is broken.</span>”</span> on the <span class="guilabel"><strong>Manage
            Jenkins</strong></span> page.</p></div><p>When the Apache HTTP Server is restarted you should be able to
        browse Jenkins at <a class="link" href="http://freedumbytes.dev.net/jenkins">http://freedumbytes.dev.net/jenkins</a>.</p><p>TODO Unprotected URLs These URLs (and URLs starting with these
        prefixes plus a /) should require no authentication. If possible,
        configure your container to pass these requests straight to Jenkins
        without requiring login. assets cli git github-webhook
        instance-identity jnlpJars subversion whoAmI</p></section><section class="section" id="ci.jenkins.config"><div class="titlepage"><div><div><h3 class="title"><a id="ci.jenkins.config" class="anchor" href="#ci.jenkins.config"><span class="octicon octicon-link"/></a>14.1.4. Jenkins configuration</h3></div></div></div><section class="section" id="ci.jenkins.config.plugins"><div class="titlepage"><div><div><h4 class="title"><a id="ci.jenkins.config.plugins" class="anchor" href="#ci.jenkins.config.plugins"><span class="octicon octicon-link"/></a>14.1.4.1. Plugins</h4></div></div></div><p>Select <span class="guilabel"><strong>Jenkins</strong></span> → <span class="guilabel"><strong>Manage Jenkins</strong></span> → <span class="guilabel"><strong>Manage Plugins</strong></span> and click <span class="guibutton"><strong>Check now</strong></span> to find
          updates. When done switch to the <span class="guilabel"><strong>Available</strong></span> tab
          to check (one-at-a-time works best) for example the following
          plugins (the other project information will be handled with <a class="xref" href="quality.assurance.html" title="Chapter 17. Quality Assurance">Chapter 17, <em>Quality Assurance</em></a>):</p><div class="itemizedlist"><ul class="itemizedlist compact"><li class="listitem"><p><a class="link" href="https://wiki.jenkins-ci.org/display/JENKINS/Blue+Ocean+Plugin">Blue
                Ocean</a> provides a new user experience for
                Jenkins.</p></li><li class="listitem"><p><a class="link" href="https://marvelution.atlassian.net/wiki/display/JJI/Documentation+Home">JIRA</a>
                integration (see also <a class="xref" href="continuous.integration.html#ci.jenkins.jira.integration" title="14.1.5. JIRA integration">Section 14.1.5, “JIRA integration”</a>).</p></li></ul></div><p>After successful <span class="guibutton"><strong>Install</strong></span> of
          all selected plugins reload Jenkins at <a class="link" href="http://freedumbytes.dev.net/tomcat/manager/html">http://freedumbytes.dev.net/tomcat/manager/html</a>
          for the latest version of the plugin to show up in the
          <span class="guilabel"><strong>Installed</strong></span> tab.</p><div style="margin-left: 0.5in; margin-right: 0.5in;" class="note"><h2>Note</h2><p>To manual install the plugin when Jenkins is deployed on
            Tomcat it is also possible to just copy the <code class="filename">.hpi</code> file to <code class="filename">P:\dev\data\ci\jenkins\plugins</code>.</p></div></section><section class="section" id="ci.jenkins.config.system"><div class="titlepage"><div><div><h4 class="title"><a id="ci.jenkins.config.system" class="anchor" href="#ci.jenkins.config.system"><span class="octicon octicon-link"/></a>14.1.4.2. System TODO obsolete</h4></div></div></div><p id="ci.jenkins.config.quiet.period"><a id="ci.jenkins.config.quiet.period"><span style="display:none;">trick</span></a>Select <span class="guilabel"><strong>Jenkins</strong></span> → <span class="guilabel"><strong>Manage Jenkins</strong></span> → <span class="guilabel"><strong>Configure System</strong></span> or type <strong class="userinput"><code>config</code></strong> in the search
          box to set:</p><div class="itemizedlist"><ul class="itemizedlist compact"><li class="listitem"><p><span class="guilabel"><strong># of executors</strong></span>:
                <strong class="userinput"><code>6</code></strong> (where a good value to start with
                would be the number of processors on your system).</p></li><li class="listitem"><p><span class="guilabel"><strong>Quiet period</strong></span>:
                <strong class="userinput"><code>30</code></strong>.</p></li><li class="listitem"><p><span class="guilabel"><strong>SCM checkout retry count</strong></span>:
                <strong class="userinput"><code>3</code></strong>.</p></li><li class="listitem"><p>Add <span class="guilabel"><strong>Ant installation</strong></span>:</p><div class="itemizedlist"><ul class="itemizedlist compact"><li class="listitem"><p><span class="guilabel"><strong>Name</strong></span>:
                    <strong class="userinput"><code>ANT_HOME</code></strong>.</p></li><li class="listitem"><p>Disable <span class="guilabel"><strong>Install
                    automatically</strong></span>.</p></li><li class="listitem"><p><span class="guilabel"><strong>ANT_HOME</strong></span>:
                    <strong class="userinput"><code>P:\dev\apps\build\apache-ant-1.10.4</code></strong>.</p></li></ul></div></li><li class="listitem"><p>Add <span class="guilabel"><strong>Maven installation</strong></span>:</p><div class="itemizedlist"><ul class="itemizedlist compact"><li class="listitem"><p><span class="guilabel"><strong>Name</strong></span>:
                    <strong class="userinput"><code>M2_HOME</code></strong>.</p></li><li class="listitem"><p>Disable <span class="guilabel"><strong>Install
                    automatically</strong></span>.</p></li><li class="listitem"><p><span class="guilabel"><strong>MAVEN_HOME</strong></span>:
                    <strong class="userinput"><code>P:\dev\apps\build\apache-maven-3.5.4</code></strong>.</p></li></ul></div></li><li class="listitem"><p><span class="guilabel"><strong>Maven Project Configuration</strong></span>:</p><div class="itemizedlist"><ul class="itemizedlist compact"><li class="listitem"><p>Optionally disable <span class="guilabel"><strong>Help make Jenkins
                    better by sending anonymous usage statistics and crash
                    reports to the Jenkins project</strong></span>.</p></li></ul></div></li><li class="listitem"><p><span class="guilabel"><strong>Jenkins Location</strong></span>:</p><div class="itemizedlist"><ul class="itemizedlist compact"><li class="listitem"><p><span class="guilabel"><strong>Jenkins URL</strong></span>:
                    <strong class="userinput"><code>http://freedumbytes.dev.net/jenkins/</code></strong>.</p></li><li class="listitem"><p><span class="guilabel"><strong>System Admin e-mail address</strong></span>:
                    <strong class="userinput"><code><em class="replaceable"><code>jenkins.noreply@company.org</code></em></code></strong>.</p></li></ul></div></li><li class="listitem"><p><span class="guilabel"><strong>E-mail Notification</strong></span>:</p><div class="itemizedlist"><ul class="itemizedlist compact"><li class="listitem"><p><span class="guilabel"><strong>SMTP server</strong></span>:
                    <strong class="userinput"><code>mail.freedumbytes.dev.net</code></strong>.</p></li><li class="listitem"><p><span class="guilabel"><strong>Default user e-mail suffix</strong></span>:
                    <strong class="userinput"><code><em class="replaceable"><code>@company.org</code></em></code></strong>
                    and click <span class="guibutton"><strong>Save</strong></span>.</p></li></ul></div></li></ul></div></section><section class="section" id="ci.jenkins.config.plugins.obsolete"><div class="titlepage"><div><div><h4 class="title"><a id="ci.jenkins.config.plugins.obsolete" class="anchor" href="#ci.jenkins.config.plugins.obsolete"><span class="octicon octicon-link"/></a>14.1.4.3. Plugins TODO obsolete</h4></div></div></div><p>Select <span class="guilabel"><strong>Jenkins</strong></span> → <span class="guilabel"><strong>Manage Jenkins</strong></span> → <span class="guilabel"><strong>Manage Plugins</strong></span>. Switch to the <span class="guilabel"><strong>Advanced</strong></span> tab and
          click <span class="guibutton"><strong>Check now</strong></span> to find updates. When done
          <span class="guilabel"><strong>Go back to update center</strong></span> and switch to the
          <span class="guilabel"><strong>Available</strong></span> tab to check (one-at-a-time works
          best) for example the following plugins (the other project
          information will be handled with <a class="xref" href="quality.assurance.html" title="Chapter 17. Quality Assurance">Chapter 17, <em>Quality Assurance</em></a>):</p><div class="itemizedlist"><ul class="itemizedlist compact"><li class="listitem"><p><a class="link" href="https://wiki.jenkins-ci.org/display/JENKINS/Modern+Status+Plugin">Modern
                Status</a> provides an alternative set of status and action
                icons to provide a fresh look to Jenkins and to be friendly
                for all users i.e. iconic not just color indication.</p></li><li class="listitem"><p><a class="link" href="https://wiki.jenkins-ci.org/display/JENKINS/Build+Trigger+Badge+Plugin">Build
                Trigger Badge</a> displays icon representing the cause of a
                build directly in the build history. It lets you quickly know
                which cause triggered a build.</p></li><li class="listitem"><p><a class="link" href="https://marvelution.atlassian.net/wiki/display/JJI/Documentation+Home">JIRA</a>
                integration (see also <a class="xref" href="continuous.integration.html#ci.jenkins.jira.integration" title="14.1.5. JIRA integration">Section 14.1.5, “JIRA integration”</a>).</p></li></ul></div><p>After successful <span class="guibutton"><strong>Install</strong></span> of
          all selected plugins reload Jenkins at <a class="link" href="http://freedumbytes.dev.net/tomcat/manager/html">http://freedumbytes.dev.net/tomcat/manager/html</a>
          for the latest version of the plugin to show up in the
          <span class="guilabel"><strong>Installed</strong></span> tab.</p><div style="margin-left: 0.5in; margin-right: 0.5in;" class="note"><h2>Note</h2><p>To manual install the plugin when Jenkins is deployed on
            Tomcat it is also possible to just copy the <code class="filename">.hpi</code> file to <code class="filename">P:\dev\data\ci\jenkins\plugins</code>.</p></div></section><section class="section" id="ci.jenkins.config.svn"><div class="titlepage"><div><div><h4 class="title"><a id="ci.jenkins.config.svn" class="anchor" href="#ci.jenkins.config.svn"><span class="octicon octicon-link"/></a>14.1.4.4. Subversion authentication</h4></div></div></div><p>Setup Subversion authentication in Jenkins at <a class="link" href="http://freedumbytes.dev.net/jenkins/scm/SubversionSCM/enterCredential">http://freedumbytes.dev.net/jenkins/scm/SubversionSCM/enterCredential</a>:</p><div class="itemizedlist"><ul class="itemizedlist compact"><li class="listitem"><p><span class="guilabel"><strong>Repository URL</strong></span>:
              <strong class="userinput"><code>http://freedumbytes.dev.net/svn-repo</code></strong>.</p></li><li class="listitem"><p><span class="guilabel"><strong>Username/password
              authentication</strong></span>:</p><div class="itemizedlist"><ul class="itemizedlist compact"><li class="listitem"><p><span class="guilabel"><strong>User name</strong></span>:
                  <strong class="userinput"><code>jenkins</code></strong>.</p></li><li class="listitem"><p><span class="guilabel"><strong>Password</strong></span>:
                  <strong class="userinput"><code><em class="replaceable"><code>password</code></em></code></strong>.</p></li></ul></div><div style="margin-left: 0.5in; margin-right: 0.5in;" class="note"><h2>Note</h2><p>When creating a new job for the Subversion scm you would
                otherwise have been presented with a link in <span class="quote">“<span class="quote">Maybe you
                need to enter credential?</span>”</span> to supply them for the
                specified URL.</p></div><p>Or alternatively use credentials (see also <a class="xref" href="continuous.integration.html#ci.jenkins.config.git" title="14.1.4.5. Git authentication">Section 14.1.4.5, “Git authentication”</a>):</p><p><span class="inlinemediaobject"><img src="images/ci/jenkins/maven-setup-3b-source-code-management.png"/></span></p></li></ul></div></section><section class="section" id="ci.jenkins.config.git"><div class="titlepage"><div><div><h4 class="title"><a id="ci.jenkins.config.git" class="anchor" href="#ci.jenkins.config.git"><span class="octicon octicon-link"/></a>14.1.4.5. Git authentication</h4></div></div></div><p>For Git authentication by Jenkins look at
          <code class="filename">_netrc</code> setup in <a class="xref" href="web.server.html#web.tomcat.windows.user.netrc" title="8.1.3.1.1. netrc">Section 8.1.3.1.1, “netrc”</a> or select <span class="guilabel"><strong>Jenkins</strong></span> → <span class="guilabel"><strong>Manage Jenkins</strong></span> → <span class="guilabel"><strong>Manage Credentials</strong></span> and <span class="guilabel"><strong>Add Credentials</strong></span> → <span class="guilabel"><strong>Username with password</strong></span>:</p><div class="itemizedlist"><ul class="itemizedlist compact"><li class="listitem"><p><span class="guilabel"><strong>Scope</strong></span>:
              <span class="guilabel"><strong>Global</strong></span>.</p></li><li class="listitem"><p><span class="guilabel"><strong>Username</strong></span>:
              <strong class="userinput"><code>jenkins</code></strong>.</p></li><li class="listitem"><p><span class="guilabel"><strong>Password</strong></span>:
              <strong class="userinput"><code><em class="replaceable"><code>password</code></em></code></strong>.</p></li><li class="listitem"><p><span class="guilabel"><strong>Description</strong></span>: <strong class="userinput"><code>apache proxy
              user</code></strong> and click <span class="guibutton"><strong>Save</strong></span>.</p></li></ul></div></section></section><section class="section" id="ci.jenkins.jira.integration"><div class="titlepage"><div><div><h3 class="title"><a id="ci.jenkins.jira.integration" class="anchor" href="#ci.jenkins.jira.integration"><span class="octicon octicon-link"/></a>14.1.5. JIRA integration</h3></div></div></div><p><a class="link" href="https://marvelution.atlassian.net/wiki/display/JJI/Documentation+Home">JIRA
        Plugin for Jenkins</a> and <a class="link" href="https://marketplace.atlassian.com/plugins/com.marvelution.jira.plugins.jenkins">Jenkins
        Plugin for JIRA</a> integrate Jenkins and Hudson/Jenkins CI Servers
        with JIRA to display builds in JIRA.</p><section class="section" id="ci.jenkins.jira.integration.install.guide"><div class="titlepage"><div><div><h4 class="title"><a id="ci.jenkins.jira.integration.install.guide" class="anchor" href="#ci.jenkins.jira.integration.install.guide"><span class="octicon octicon-link"/></a>14.1.5.1. Jenkins Plugin installation guide</h4></div></div></div><p><a class="link" href="https://marvelution.atlassian.net/wiki/display/JJI/Release+Notes">Download</a>
          the archive: <code class="filename">jenkins-jira-plugin-1.4.5.hpi</code>
          [version <a class="link" href="https://marketplace.atlassian.com/plugins/com.marvelution.jira.plugins.jenkins/versions">1.4.5</a>].</p><p>Just drop the downloaded *.hpi or *.jpi file into the
          <code class="filename">P:\dev\data\ci\jenkins\plugins</code>
          directory and rename to
          <code class="filename">jenkins-jira-plugin.hpi</code>. You will then need to
          restart Jenkins (many containers let you do this without restarting
          the container).</p><p>Next at the JIRA Admin GUI <span class="guilabel"><strong>Add-ons</strong></span> <a class="link" href="http://freedumbytes.dev.net/jira/plugins/servlet/upm/marketplace/featured">http://freedumbytes.dev.net/jira/plugins/servlet/upm/marketplace/featured</a>
          <span class="guilabel"><strong>Find new add-ons</strong></span> with <span class="guilabel"><strong>Search the
          Marketplace</strong></span> for <strong class="userinput"><code>jenkins</code></strong> and just
          <span class="guibutton"><strong>Install</strong></span>.</p><div style="margin-left: 0.5in; margin-right: 0.5in;" class="note"><h2>Note</h2><p>In case of an issue (see also <a class="link" href="https://marvelution.atlassian.net/browse/JJI-134">JJI-134</a>)
            with the latest version <a class="link" href="https://marvelution.atlassian.net/wiki/display/JJI/Release+Notes">download</a>
            an older *.obr version and select <span class="guilabel"><strong>Add-ons</strong></span> → <span class="guilabel"><strong>Manage add-ons</strong></span> → <span class="guilabel"><strong>Upload add-on</strong></span> to install this prior version.</p></div></section><section class="section" id="ci.jenkins.jira.integration.links"><div class="titlepage"><div><div><h4 class="title"><a id="ci.jenkins.jira.integration.links" class="anchor" href="#ci.jenkins.jira.integration.links"><span class="octicon octicon-link"/></a>14.1.5.2. Application links</h4></div></div></div><p>At the JIRA Admin GUI <span class="guilabel"><strong>Add-ons</strong></span> <a class="link" href="http://freedumbytes.dev.net/jira/plugins/servlet/applinks/listApplicationLinks">http://freedumbytes.dev.net/jira/plugins/servlet/applinks/listApplicationLinks</a>
          <span class="guibutton"><strong>Create new link</strong></span>:
          <strong class="userinput"><code>http://freedumbytes.dev.net/jenkins</code></strong>. In
          pop-up <span class="guilabel"><strong>Configure Application URL</strong></span> click
          <span class="guibutton"><strong>Continue</strong></span> to configure:</p><div class="itemizedlist"><ul class="itemizedlist compact"><li class="listitem"><p><span class="guilabel"><strong>Application Name</strong></span>:
              <strong class="userinput"><code>freedumbytes.dev.net Jenkins</code></strong>.</p></li><li class="listitem"><p><span class="guilabel"><strong>Application Type</strong></span>:
              <span class="guilabel"><strong>Jenkins</strong></span> and click
              <span class="guibutton"><strong>Continue</strong></span>.</p></li></ul></div><p><span class="guibutton"><strong>Edit</strong></span> this new Application Link
          <span class="guilabel"><strong>freedumbytes.dev.net Jenkins</strong></span> to change:</p><div class="itemizedlist"><ul class="itemizedlist compact"><li class="listitem"><p><span class="guilabel"><strong>Outgoing Authentication</strong></span> to enable
              <span class="guilabel"><strong>Basic Access</strong></span> reusing the
              <strong class="userinput"><code>jira</code></strong> integration user from the section
              <a class="xref" href="issue.tracker.html#it.jira.fisheye.integration.users" title="12.1.8.1. Integration users">Section 12.1.8.1, “Integration users”</a> and click
              <span class="guibutton"><strong>Close</strong></span>.</p></li></ul></div><p>Next at the JIRA Admin GUI <span class="guilabel"><strong>Add-ons</strong></span> <a class="link" href="http://freedumbytes.dev.net/jira/secure/admin/ConfigureJenkinsIntegration!default.jspa">http://freedumbytes.dev.net/jira/secure/admin/ConfigureJenkinsIntegration!default.jspa</a>
          <span class="guilabel"><strong>Jenkins Configuration</strong></span> select
          <span class="guilabel"><strong>Actions</strong></span> to <span class="guilabel"><strong>Auto enable new
          Jobs</strong></span> and enable the already listed jobs followed by
          <span class="guilabel"><strong>Actions</strong></span> → <span class="guilabel"><strong>Refresh Job List</strong></span> to <span class="guilabel"><strong>Sync Job</strong></span>s.</p></section></section><section class="section" id="ci.jenkins.config.slave"><div class="titlepage"><div><div><h3 class="title"><a id="ci.jenkins.config.slave" class="anchor" href="#ci.jenkins.config.slave"><span class="octicon octicon-link"/></a>14.1.6. Slave configuration</h3></div></div></div><p>A <a class="link" href="https://en.wikipedia.org/wiki/List_of_fictional_butlers">butler</a>
        is a domestic worker in a large household. A <a class="link" href="https://en.wikipedia.org/wiki/Valet">valet</a> is a
        servants who serve as personal attendants to their employer.</p><p>Select <span class="guilabel"><strong>Jenkins</strong></span> → <span class="guilabel"><strong>Manage Jenkins</strong></span> → <span class="guilabel"><strong>Manage Nodes</strong></span> to add:</p><div class="itemizedlist"><ul class="itemizedlist compact"><li class="listitem"><p><span class="guilabel"><strong>New Node</strong></span> with:</p><div class="itemizedlist"><ul class="itemizedlist compact"><li class="listitem"><p><span class="guilabel"><strong>Node name</strong></span>:
                    <strong class="userinput"><code>jeeves</code></strong>.</p></li><li class="listitem"><p>As <span class="guilabel"><strong>Permanent Agent</strong></span> and click
                    <span class="guibutton"><strong>OK</strong></span>.</p></li></ul></div></li></ul></div><p>Configure this new node as follows:</p><div class="itemizedlist"><ul class="itemizedlist compact"><li class="listitem"><p><span class="guilabel"><strong># of executors</strong></span>:
              <strong class="userinput"><code>6</code></strong> (where a good value to start with would
              be the number of processors on your system).</p></li><li class="listitem"><p><span class="guilabel"><strong>Remote root directory</strong></span>:
              <strong class="userinput"><code>P:\dev\data\ci\jeeves</code></strong>.</p></li><li class="listitem"><p><span class="guilabel"><strong>Labels</strong></span>:
              <strong class="userinput"><code>windows</code></strong>.</p></li><li class="listitem"><p><span class="guilabel"><strong>Usage</strong></span>: <span class="guilabel"><strong>Use this node as
              mush as possible</strong></span>.</p></li><li class="listitem"><p><span class="guilabel"><strong>Launch method</strong></span>: <span class="guilabel"><strong>Launch agent
              via Java Web Start</strong></span>.</p></li><li class="listitem"><p><span class="guilabel"><strong>Availability</strong></span>: <span class="guilabel"><strong>Keep this
              slave online as much as possible</strong></span> and click
              <span class="guibutton"><strong>Save</strong></span>.</p></li></ul></div><p>Select <span class="guilabel"><strong>Jenkins</strong></span> → <span class="guilabel"><strong>Build Executor Status</strong></span> → <span class="guilabel"><strong>jeeves</strong></span> to connect the slave to Jenkins using <span class="guilabel"><strong>Launch
        agent from browser on slave</strong></span> by clicking the orange
        <span class="guibutton"><strong>Launch</strong></span> button. This will download the file
        <code class="filename">slave-agent.jnlp</code>. To install the slave
        <span class="guilabel"><strong>jeeves</strong></span> run this file and supply proxy
        credentials:</p><div class="itemizedlist"><ul class="itemizedlist compact"><li class="listitem"><p><span class="guilabel"><strong><span class="accel">U</span>ser name</strong></span>:
              <strong class="userinput"><code>jjasper</code></strong>.</p></li><li class="listitem"><p><span class="guilabel"><strong><span class="accel">P</span>assword</strong></span>:
              <strong class="userinput"><code><em class="replaceable"><code>password</code></em></code></strong>.</p></li><li class="listitem"><p><span class="guilabel"><strong>Labels</strong></span>:
              <strong class="userinput"><code>windows</code></strong>.</p></li><li class="listitem"><p>Leave <span class="guilabel"><strong>Save this password in your password
              list</strong></span> unchecked and click <span class="guibutton"><strong>OK</strong></span> → <span class="guibutton"><strong><span class="accel">R</span>un</strong></span> → <span class="guimenu"><strong><span class="accel">F</span>ile</strong></span> → <span class="guimenuitem"><strong>Install as a service</strong></span>.</p></li></ul></div><div style="margin-left: 0.5in; margin-right: 0.5in;" class="note"><h2>Note</h2><p>Don't forget to create the slave folder first with
            <code class="command">mkdir P:\dev\data\ci\jeeves</code>.</p></div><p>Edit the generated id <a class="xref" href="continuous.integration.html#ci.jenkins.config.slave.jeeves.id"><img src="images/community/docbook/callouts/1.png" alt="1" border="0" height="17px" width="17px" class="callout"/></a> and name <a class="xref" href="continuous.integration.html#ci.jenkins.config.slave.jeeves.name"><img src="images/community/docbook/callouts/2.png" alt="2" border="0" height="17px" width="17px" class="callout"/></a> in
        <code class="filename">P:\dev\data\ci\jeeves\jenkins-slave.xml</code> to insert
        /tomcat :</p><pre xmlns="" class="language-provided"><code class="language-xml">&lt;service&gt;
  &lt;id&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="strikethrough">jenkinsslave-P__dev_data_ci_</span>jeeves<span xmlns="http://www.w3.org/1999/xhtml" id="ci.jenkins.config.slave.jeeves.id"/><a xmlns="http://www.w3.org/1999/xhtml" id="ci.jenkins.config.slave.jeeves.id"><span style="display:none;">trick</span></a><img xmlns="http://www.w3.org/1999/xhtml" style="border: 0; " src="images/community/docbook/callouts/1.png" alt="1" height="17px" width="17px" class="callout"/>&lt;/id&gt;
  &lt;name&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="strikethrough">Jenkins Slave</span>freedumbytes.dev.net Jeeves<span xmlns="http://www.w3.org/1999/xhtml" id="ci.jenkins.config.slave.jeeves.name"/><a xmlns="http://www.w3.org/1999/xhtml" id="ci.jenkins.config.slave.jeeves.name"><span style="display:none;">trick</span></a><img xmlns="http://www.w3.org/1999/xhtml" style="border: 0; " src="images/community/docbook/callouts/2.png" alt="2" height="17px" width="17px" class="callout"/>&lt;/name&gt;
  &lt;description&gt;
   This service runs an agent for Jenkins automation server.
  &lt;/description&gt;
  &lt;executable&gt;P:\dev\apps\prg\java-x64\jdk1.8.0_162\bin\java.exe&lt;/executable&gt;
  &lt;arguments&gt;
    &lt;!-- -Xrs see also <a xmlns="http://www.w3.org/1999/xhtml" class="xref" href="programming.languages.html#prg.java.platform.reference" title="3.1.3.1. Standard Edition Tools Reference">Section 3.1.3.1, “Standard Edition Tools Reference”</a> --&gt;
    -jar "%BASE%\slave.jar" -jnlpUrl 
    http://freedumbytes.dev.net/jenkins/computer/jeeves/slave-agent.jnlp 
    -secret …
  &lt;/arguments&gt;
  &lt;logmode&gt;rotate&lt;/logmode&gt;
  &lt;onfailure action="restart" /&gt;
&lt;/service&gt;
</code></pre><p>To activate the changes reinstall the service with the following
        commands in <a class="link" href="operating.system.html#os.windows.cmd.elevated" title="1.1.14.1. Elevated Command Prompt">an elevated
        command processor</a> (see also <a class="xref" href="operating.system.html#os.windows.process.explorer" title="1.1.5. Task Manager replacement">Section 1.1.5, “Task Manager replacement”</a> in case of
        <span class="quote">“<span class="quote">WMI.WmiException:
        ServiceMarkedForDeletion</span>”</span>):</p><pre xmlns="" class="language-provided"><code class="language-bash">cd /d P:\dev\data\ci\jeeves
jenkins-slave.exe stop
jenkins-slave.exe uninstall TODO before changes…
del *.log
jenkins-slave.exe install
jenkins-slave.exe start
services.msc
</code></pre><div style="margin-left: 0.5in; margin-right: 0.5in;" class="important"><h2>Important</h2><p>In case of a new jdk installation use <a class="link" href="operating.system.html#os.windows.cmd.elevated" title="1.1.14.1. Elevated Command Prompt">an elevated command prompt</a>
          just run <code class="command">net stop jeeves</code> and <code class="command">net start
          jeeves</code>.</p></div><div style="margin-left: 0.5in; margin-right: 0.5in;" class="note"><h2>Note</h2><p>The jdk upgrade for Jenkins master is handled when the upgrade
          is done for <a class="link" href="web.server.html#web.tomcat.windows.service" title="8.1.3. Windows service">Tomcat</a>.</p></div><p>Verify the installation and the JVM memory usage at <a class="link" href="http://freedumbytes.dev.net/jenkins/systemInfo">http://freedumbytes.dev.net/jenkins/systemInfo</a>
        and <a class="link" href="http://freedumbytes.dev.net/jenkins/computer/jeeves/systemInfo">http://freedumbytes.dev.net/jenkins/computer/jeeves/systemInfo</a>.</p><p>Next fix the following error in
        <code class="filename">P:\dev\data\ci\jeeves\jenkins-slave.err.log</code>:</p><pre class="screen">Failing to obtain http://freedumbytes.dev.net/jenkins/computer/jeeves/slave-agent.jnlp?encrypt=true
  java.io.IOException: Failed to load …: 401 Unauthorized
    at hudson.remoting.Launcher.parseJnlpArguments(Launcher.java:275)
    at hudson.remoting.Launcher.run(Launcher.java:219)
    at hudson.remoting.Launcher.main(Launcher.java:192)
Waiting 10 seconds before retry
</pre><p>Which is also displayed in
        http://freedumbytes.dev.net/jenkins/computer/jeeves/ node page as
        <span class="quote">“<span class="quote">Connection was broken</span>”</span> and
        <code class="filename">P:/dev/logs/httpserver/freedumbytes.dev.net-access.log:</code></p><pre class="screen">[201605 01:11:16] "GET /jenkins/computer/jeeves/slave-agent.jnlp?encrypt=true HTTP/1.1" 401 381 "-" "Java/1.8.0_162"
</pre><p>Just allow anonymous access for the local area network by
        editing
        <code class="filename">P:\dev\apps\httpserver\apache-conf\httpd-jenkins.conf</code>:</p><pre xmlns="" class="language-provided"><code class="language-apache">&lt;IfModule proxy_module&gt;
&lt;IfModule proxy_ajp_module&gt;
  …

  &lt;Location /jenkins&gt;
    Include ../apache-conf/httpd-freedumbytes-realm.conf
  &lt;/Location&gt;

  &lt;Location /jenkins/git/notifyCommit&gt;
    &lt;RequireAll&gt;
      Include ../apache-conf/httpd-lan-access.conf
    &lt;/RequireAll&gt;
  &lt;/Location&gt;

  &lt;Location /jenkins/computer/jeeves/slave-agent.jnlp&gt;<span xmlns="http://www.w3.org/1999/xhtml" id="ci.jenkins.config.slave.agent"/><a xmlns="http://www.w3.org/1999/xhtml" id="ci.jenkins.config.slave.agent"><span style="display:none;">trick</span></a><img xmlns="http://www.w3.org/1999/xhtml" style="border: 0; " src="images/community/docbook/callouts/1.png" alt="1" height="17px" width="17px" class="callout"/>
    &lt;RequireAll&gt;
      Include ../apache-conf/httpd-lan-access.conf<span xmlns="http://www.w3.org/1999/xhtml" id="ci.jenkins.config.slave.anonymous.local.access"/><a xmlns="http://www.w3.org/1999/xhtml" id="ci.jenkins.config.slave.anonymous.local.access"><span style="display:none;">trick</span></a><img xmlns="http://www.w3.org/1999/xhtml" style="border: 0; " src="images/community/docbook/callouts/2.png" alt="2" height="17px" width="17px" class="callout"/>
    &lt;/RequireAll&gt;
  &lt;/Location&gt;
&lt;/IfModule&gt;
&lt;/IfModule&gt;
</code></pre><p>After restarting jeeves fix the next error in
        <code class="filename">P:\dev\data\ci\jeeves\jenkins-slave.err.log</code>:</p><pre class="screen">May 07, 2016 1:25:28 AM hudson.remoting.jnlp.Main createEngine
INFO: Setting up slave: jeeves
May 07, 2016 1:25:28 AM hudson.remoting.jnlp.Main$CuiListener &lt;init&gt;
INFO: Jenkins agent is running in headless mode.
May 07, 2016 1:25:28 AM hudson.remoting.jnlp.Main$CuiListener status
INFO: Locating server among [http://freedumbytes.dev.net/jenkins/]
May 07, 2016 1:25:28 AM hudson.remoting.jnlp.Main$CuiListener error
SEVERE: http://freedumbytes.dev.net/jenkins/tcpSlaveAgentListener/ is invalid: 401 Unauthorized
  java.lang.Exception: …/tcpSlaveAgentListener/ is invalid: 401 Unauthorized
    at hudson.remoting.Engine.run(Engine.java:215)
</pre><p>See also
        <code class="filename">P:/dev/logs/httpserver/freedumbytes.dev.net-access.log:</code></p><pre class="screen">[20160507 01:25:27] "GET …/computer/jeeves/slave-agent.jnlp?encrypt=true HTTP/1.1" 200 736 "-" "Java/1.8.0_162"
[20160507 01:25:28] "GET …/tcpSlaveAgentListener/ HTTP/1.1" 401 381 "-" "Java/1.8.0_162"
</pre><p>Again allow anonymous access for the local area network by editing
        <code class="filename">P:\dev\apps\httpserver\apache-conf\httpd-jenkins.conf</code>:</p><pre xmlns="" class="language-provided"><code class="language-apache">&lt;IfModule proxy_module&gt;
&lt;IfModule proxy_ajp_module&gt;
  …

  &lt;Location /jenkins/computer/jeeves/slave-agent.jnlp&gt;
    &lt;RequireAll&gt;
      Include ../apache-conf/httpd-lan-access.conf
    &lt;/RequireAll&gt;
  &lt;/Location&gt;

  &lt;Location /jenkins/tcpSlaveAgentListener&gt;<span xmlns="http://www.w3.org/1999/xhtml" id="ci.jenkins.config.slave.tcp.agent.listener"/><a xmlns="http://www.w3.org/1999/xhtml" id="ci.jenkins.config.slave.tcp.agent.listener"><span style="display:none;">trick</span></a><img xmlns="http://www.w3.org/1999/xhtml" style="border: 0; " src="images/community/docbook/callouts/1.png" alt="1" height="17px" width="17px" class="callout"/>
    &lt;RequireAll&gt;
      Include ../apache-conf/httpd-lan-access.conf TODO disable to download jnlp
    &lt;/RequireAll&gt;
  &lt;/Location&gt;
&lt;/IfModule&gt;
&lt;/IfModule&gt;
</code></pre><p>Now after restarting jeeves check
        <code class="filename">P:\dev\data\ci\jeeves\jenkins-slave.err.log</code>:</p><pre class="screen">May 07, 2016 1:38:02 AM hudson.remoting.jnlp.Main createEngine
INFO: Setting up slave: jeeves
May 07, 2016 1:38:02 AM hudson.remoting.jnlp.Main$CuiListener &lt;init&gt;
INFO: Jenkins agent is running in headless mode.
May 07, 2016 1:38:02 AM hudson.remoting.jnlp.Main$CuiListener status
INFO: Locating server among [http://freedumbytes.dev.net/jenkins/]
May 07, 2016 1:38:02 AM hudson.remoting.jnlp.Main$CuiListener status
INFO: Handshaking
May 07, 2016 1:38:02 AM hudson.remoting.jnlp.Main$CuiListener status
INFO: Connecting to freedumbytes.dev.net:49403
May 07, 2016 1:38:02 AM hudson.remoting.jnlp.Main$CuiListener status
INFO: Trying protocol: JNLP2-connect
May 07, 2016 1:38:02 AM hudson.remoting.jnlp.Main$CuiListener status
INFO: Connected
</pre><p>See also
        <code class="filename">P:/dev/logs/httpserver/freedumbytes.dev.net-access.log:</code></p><pre class="screen">[20160507 01:38:01] "GET …/computer/jeeves/slave-agent.jnlp?encrypt=true HTTP/1.1" 200 736 "-" "Java/1.8.0_162"
[20160507 01:38:02] "GET …/tcpSlaveAgentListener/ HTTP/1.1" 200 12 "-" "Java/1.8.0_162"
</pre><div style="margin-left: 0.5in; margin-right: 0.5in;" class="note"><h2>Note</h2><p>And access to slave-agnet-jnlp is still not possible without
            the secret code:</p><div class="figure" id="prj.figure.jenkins.slave.agent.jnlp"><a id="prj.figure.jenkins.slave.agent.jnlp"><span style="display:none;">trick</span></a><div class="figure-contents"><div class="screenshot"><div class="mediaobject"><img src="images/ci/jenkins/jnlp-secret-oops.png" alt="Jenkins Slave Agent"/></div></div></div><div class="figure-title">Figure 14.1. Jenkins Slave Agent</div></div><br class="figure-break"/></div><p>Optionally select <span class="guilabel"><strong>Jenkins</strong></span> → <span class="guilabel"><strong>Manage Jenkins</strong></span> → <span class="guilabel"><strong>Manage Nodes</strong></span> to change:</p><div class="itemizedlist"><ul class="itemizedlist compact"><li class="listitem"><p><span class="guilabel"><strong>master</strong></span> → <span class="guilabel"><strong>Configure</strong></span> with:</p><div class="itemizedlist"><ul class="itemizedlist compact"><li class="listitem"><p><span class="guilabel"><strong># of executors</strong></span>:
                    <strong class="userinput"><code>2</code></strong>.</p></li><li class="listitem"><p><span class="guilabel"><strong>Labels</strong></span>:
                    <strong class="userinput"><code>master</code></strong>.</p></li><li class="listitem"><p><span class="guilabel"><strong>Usage</strong></span>: <span class="guilabel"><strong>Only build
                    jobs with label restrictions matching this node</strong></span>
                    and click <span class="guibutton"><strong>Save</strong></span>.</p></li></ul></div></li></ul></div><p>Historically, Jenkins master and slaves behaved as if they
        altogether form a single distributed process. This means a slave can
        ask a master to do just about anything within the confinement of the
        operating system, such as accessing files on the master or trigger
        other jobs on Jenkins. Should you use <a class="link" href="https://wiki.jenkins-ci.org/display/JENKINS/Slave+To+Master+Access+Control">Slave
        To Master Access Control</a> <span class="guilabel"><strong>Jenkins</strong></span> → <span class="guilabel"><strong>Manage Jenkins</strong></span> → <span class="guilabel"><strong>Configure Global Security</strong></span> and check <span class="guilabel"><strong>Enable Slave → Master Access
        Control</strong></span>.</p><section class="section" id="ci.jenkins.windows.user"><div class="titlepage"><div><div><h4 class="title"><a id="ci.jenkins.windows.user" class="anchor" href="#ci.jenkins.windows.user"><span class="octicon octicon-link"/></a>14.1.6.1. Log On Windows user</h4></div></div></div><p>For the same reason as <a class="xref" href="web.server.html#web.tomcat.windows.user" title="8.1.3.1. Log On Windows user">Section 8.1.3.1, “Log On Windows user”</a> launch the <span class="application"><strong>Service
          Management Console</strong></span> with
          <code class="command">services.msc</code>. Right click on
          <span class="guilabel"><strong>freedumbytes.dev.net Jeeves</strong></span> and select
          <span class="guimenuitem"><strong>P<span class="accel">r</span>operties</strong></span> → <span class="guilabel"><strong>Log On</strong></span> to use <span class="guilabel"><strong><span class="accel">T</span>his
          account</strong></span> <strong class="userinput"><code>.\Tomcat</code></strong>. After password
          conformation click <span class="guibutton"><strong><span class="accel">A</span>pply</strong></span> and
          restart the service.</p></section></section></section></section><script xmlns="" type="text/javascript" src="js/highlight.min.js"> </script><script xmlns="" type="text/javascript">hljs.initHighlightingOnLoad();</script><footer><ul class="navfooter"><li class="previous"><a accesskey="p" href="repository.manager.html"><strong>Previous</strong>Chapter 13. Repository Manager</a></li><li class="up"><a accesskey="u" href="#"><strong>Top of page</strong></a></li><li class="home"><a accesskey="h" href="index.html"><strong>Front page</strong></a></li><li class="next"><a accesskey="n" href="integrated.development.environment.html"><strong>Next</strong>Chapter 15. Integrated Development Environment</a></li></ul></footer></body></html>